name: Keep SSH Server Running

on:
  workflow_dispatch:

jobs:
  ssh-server:
    runs-on: ubuntu-latest
    steps:
      - name: Install SSH server and sshpass
        run: |
          sudo apt-get update
          sudo apt-get install -y openssh-server sshpass
          sudo systemctl enable ssh
          sudo systemctl start ssh

      - name: Set runner password
        run: |
          echo "runner:gex" | sudo chpasswd
          sudo sed -i 's/^#PasswordAuthentication yes/PasswordAuthentication yes/' /etc/ssh/sshd_config
          sudo sed -i 's/^PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config
          sudo systemctl restart ssh

      - name: Keep SSH server running
        run: |
          echo "âœ… SSH server is running. You can now SSH into the runner with user 'runner' and password 'gex'."
          # Keep the job alive indefinitely
          tail -f /dev/null
